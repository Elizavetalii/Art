# Art Culinary CRM (Django)

Минимальный каркас CRM для завода готовой еды по предоставленной схеме БД.

## Быстрый старт
1. Создать и активировать venv:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```
2. Установить зависимости (требуется доступ в интернет или локальный индекс PyPI):
   ```bash
   pip install -r requirements.txt
   ```
3. Заполнить переменные окружения (см. `.env.example`). Для PostgreSQL:
   ```bash
   export $(grep -v '^#' .env.example | xargs)
   ```
   или скопировать `.env` и подставить реальные значения.
4. Применить миграции:
   ```bash
   python manage.py migrate
   ```
   При желании загрузить демо-данные:
   ```bash
   python manage.py loaddata fixtures/sample_data.json
   ```
   Документированный API:
   - схема: http://127.0.0.1:8000/api/schema/
   - Swagger UI: http://127.0.0.1:8000/api/docs/
   - базовый REST: http://127.0.0.1:8000/api/ (endpoints)
5. Создать суперпользователя для доступа в админку:
   ```bash
   python manage.py createsuperuser
   ```
6. Запустить dev-сервер:
   ```bash
   python manage.py runserver
   ```
7. Кастомные кабинеты (без Django admin):
   - Логин: http://127.0.0.1:8000/login/
   - Кабинет менеджера: http://127.0.0.1:8000/manager/
   - Клиенты: http://127.0.0.1:8000/manager/clients/
   - Заказы: http://127.0.0.1:8000/manager/orders/

## Примечания по модели
- Пользователи имеют роли через промежуточную таблицу `UserRole`.
- Клиенты, контакты, этапы, история этапов и взаимодействия отражают воронку продаж.
- Заказы и позиции учитывают как блюда каталога, так и сырьё/ингредиенты и кастомные техкарты.
- Логистика: доставки привязаны к заказам, маршруты и остановки маршрутов управляют курьерами.
- Техкарты блюд содержат состав и варианты выхода/массы.

Структура соответствует предоставленной ER-диаграмме и готова к генерации реальной БД через `migrate`.
